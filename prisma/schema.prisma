// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    user_id					Int				@default(autoincrement()) @id
	family_name				String
	first_name				String
	middle_name				String?
	login					String			@unique
	password				String
	excel_document  		Excel_document[]
}

model Address {
	address_id				Int				@default(autoincrement()) @id
	city					String
	street					String
	house					String
	appartment				String
	meter_readings			Meter_readings[]
	erors					Error[]
}

model Meter_readings {
	meter_readings_id		Int   			@default(autoincrement()) @id
	address					Address			@relation(fields: [address_id], references: [address_id])
	address_id				Int
	hot_water				Float
	cold_water				Float
	excel_document			Excel_document	@relation(fields: [excel_document_id], references: [excel_document_id])
	excel_document_id		Int
}

model Excel_document{
	excel_document_id		Int				@default(autoincrement()) @id
	document_name			String
	upload_date				DateTime	
	user					User?			@relation(fields: [user_id], references: [user_id])
	user_id					Int?
	meter_readeings			Meter_readings[]
	eror					Error[]
}

model Error{
	eror_id					Int				@default(autoincrement()) @id
	adress					Address			@relation(fields: [address_id], references: [address_id])
	address_id				Int
	eror_content			String
	excel_document			Excel_document	@relation(fields: [excel_document_id], references: [excel_document_id])
	excel_document_id		Int		
	document_row			Int
}
